<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />


<meta name="author" content="Connor Segneri" />


<title>Milestone 4 - Development Phase</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}

.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>
<script>
$(document).ready(function () {
  window.initializeCodeFolding("show" === "show");
});
</script>




<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
  padding-left: 25px;
  text-indent: 0;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>

<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Capstone - NCMEC Data Map</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="milestone1.html">Milestone 1</a>
</li>
<li>
  <a href="milestone2.html">Milestone 2</a>
</li>
<li>
  <a href="milestone3.html">Milestone 3</a>
</li>
<li>
  <a href="milestone4.html">Milestone 4</a>
</li>
<li>
  <a href="milestone5.html">Milestone 5</a>
</li>
<li>
  <a href="milestone6.html">Milestone 6</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Milestone 4 - Development Phase</h1>
<h4 class="author"><em>Connor Segneri</em></h4>

</div>


<p><br></p>
<hr />
<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>The NCMEC Data Map is a Shiny-R application that uses missing persons and attempted kidnapping data from the National Council of Missing and Exploited Children to display an interactive map with filterable characteristics for police officers to use in order to more effectively investigate and prevent kidnapping attempts.</p>
<p>This milestone covers the development phase for the NCMEC Data Map. The application itself is completed, and this report aims to explain the source code itself that was written for it.</p>
<hr />
</div>
<div id="video-tutorial" class="section level1">
<h1>Video Tutorial</h1>
<center>
<iframe width="630" height="504" src="https://www.useloom.com/embed/86b090dd202a46cda2a718586b4ec09f" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen>
</iframe>
</center>
<hr />
</div>
<div id="mapping-of-functional-requirements" class="section level1">
<h1>Mapping of Functional Requirements</h1>
<p>This section ensures that all the functional requirements have been satisfied by creating a mapping from each requirement to the module(s) or function(s) that satisfies it.</p>
<div id="viewing" class="section level3">
<h3>Viewing</h3>
<table>
<thead>
<tr class="header">
<th align="left">Functional_Requirement</th>
<th align="left">Code_Functions</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Displaying NCMEC data in a map.</td>
<td align="left">server.R, output$map</td>
</tr>
</tbody>
</table>
<p><strong>In App</strong></p>
<center>
<img src="images/m4_map.png" />
</center>
<p><br></p>
</div>
<div id="filtering" class="section level3">
<h3>Filtering</h3>
<table>
<thead>
<tr class="header">
<th align="left">Functional_Requirement</th>
<th align="left">Code_Functions</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Allowing for filtering of NCMEC data.</td>
<td align="left">server.R, whichSets(), getMissing(), getKidnapping()</td>
</tr>
</tbody>
</table>
<p><strong>In App</strong></p>
<center>
<img src="images/m2_missing_tab.png" width="400" />
</center>
<p><br></p>
</div>
<div id="downloading" class="section level3">
<h3>Downloading</h3>
<table>
<thead>
<tr class="header">
<th align="left">Functional_Requirement</th>
<th align="left">Code_Functions</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Allows for downloading filtered NCMEC data.</td>
<td align="left">server.R, output$download_link</td>
</tr>
</tbody>
</table>
<p><strong>In App</strong></p>
<center>
<img src="images/m4_download.png" width="300" />
</center>
<p><br></p>
<hr />
</div>
</div>
<div id="module-test-cases" class="section level1">
<h1>Module Test Cases</h1>
<p>This section handles the development for module test cases for the application.</p>
<div id="map-testing" class="section level3">
<h3>Map Testing</h3>
<table>
<thead>
<tr class="header">
<th align="right">Step</th>
<th align="left">Test_Detail</th>
<th align="left">Expected_Results</th>
<th align="left">Issues</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">Place mouse over the map and scroll.</td>
<td align="left">Zooming in/out.</td>
<td align="left">none</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">Place mouse over clustered node and click.</td>
<td align="left">Map should zoom in and expand in on the clustered area.</td>
<td align="left">none</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">Place mouse over single node and click.</td>
<td align="left">Popup box should appear with information about the selected node.</td>
<td align="left">none</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="left">Click the “Download Filtered Data” button.</td>
<td align="left">A zip file should download that contains two csvs inside.</td>
<td align="left">none</td>
</tr>
</tbody>
</table>
</div>
<div id="filter-testing" class="section level3">
<h3>Filter Testing</h3>
<table>
<thead>
<tr class="header">
<th align="right">Step</th>
<th align="left">Test_Detail</th>
<th align="left">Expected_Results</th>
<th align="left">Issues</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">Go through each filter and selected them all one at a time.</td>
<td align="left">The map should auto-filter whenever something is selected.</td>
<td align="left">none</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">Select the switches at the bottom of the Missing Persons and Attempted Kidnapping tabs.</td>
<td align="left">These should select/deselect the datasets visible on the map.</td>
<td align="left">none</td>
</tr>
</tbody>
</table>
<hr />
</div>
</div>
<div id="source-code-listing" class="section level1">
<h1>Source Code Listing</h1>
<p>This sections provides listings and explanations for the source code that makes the interactive map in Shiny-R.</p>
<div id="ui.r-file" class="section level3">
<h3>ui.R File</h3>
<pre class="r"><code>header &lt;- dashboardHeader(
  title = &quot;NCMEC Data Map&quot;
)

body &lt;- dashboardBody(
  fluidRow(tags$head(tags$style(&quot;.rightAlign{float:right;}&quot;)),
    column(width = 8,
           box(width = NULL, title = &quot;Data Map&quot;, status = &quot;warning&quot;, solidHeader = TRUE,
                  leafletOutput(&quot;map&quot;, height = 600),
                  downloadLink(&quot;download_link&quot;, label = &quot;Download Filtered Data&quot;)
           )
    ),
    column(4,
      tabBox(width = NULL, title = &quot;Filters&quot;,
             tabPanel(&quot;Missing Persons&quot;,
                      tabBox(width = NULL,
                             tabPanel(&quot;Location&quot;,
                                      selectInput(&quot;m_state_inp&quot;, &quot;State&quot;, multiple = TRUE,
                                                  choices = sort(unique(missing$state))),
                                      selectInput(&quot;m_city_inp&quot;, &quot;City&quot;, multiple = TRUE,
                                                  choices = sort(unique(missing$city))),
                                      selectInput(&quot;m_zip_inp&quot;, &quot;Zipcode&quot;, multiple = TRUE,
                                                  choices = sort(unique(missing$zip)))
                                      ),
                             tabPanel(&quot;Child&quot;,
                                      selectInput(&quot;m_case_num_inp&quot;, &quot;Case Number&quot;, multiple = TRUE,
                                                  choices = sort(unique(missing$Case.Number))),
                                      selectInput(&quot;m_child_race_inp&quot;, &quot;Child Race&quot;, multiple = TRUE,
                                                  choices = sort(unique(missing$Race))),
                                      selectInput(&quot;m_child_gender_inp&quot;, &quot;Child Gender&quot;, multiple = TRUE,
                                                  choices = sort(unique(missing$Gender))),
                                      selectInput(&quot;m_child_age_inp&quot;, &quot;Child Age&quot;, multiple = TRUE,
                                                  choices = sort(unique(missing$Age.Missing)))
                                      ),
                             tabPanel(&quot;Vehicle&quot;,
                                      selectInput(&quot;m_veh_style_inp&quot;, &quot;Vehicle Style&quot;, multiple = TRUE,
                                                  choices = sort(unique(missing$Vehicle.Style))),
                                      selectInput(&quot;m_veh_color_inp&quot;, &quot;Vehicle Color&quot;, multiple = TRUE,
                                                  choices = sort(unique(missing$Vehicle.Color)))
                                      )
                             ),
                      materialSwitch(&quot;missing_switch&quot;, status = &quot;primary&quot;, right = TRUE,
                                     value = TRUE, label = &quot;Include Missing Persons Data Set&quot;)
                      ),
             tabPanel(&quot;Attempted Kidnapping&quot;,
                      tabBox(width = NULL,
                             tabPanel(&quot;Location&quot;,
                                      selectInput(&quot;k_state_inp&quot;, &quot;State&quot;, multiple = TRUE,
                                                  choices = sort(unique(kidnapping$state))),
                                      selectInput(&quot;k_city_inp&quot;, &quot;City&quot;, multiple = TRUE,
                                                  choices = sort(unique(kidnapping$city))),
                                      selectInput(&quot;k_zip_inp&quot;, &quot;Zipcode&quot;, multiple = TRUE,
                                                  choices = sort(unique(kidnapping$zip)))
                             ),
                             tabPanel(&quot;Case&quot;,
                                      selectInput(&quot;k_case_type_inp&quot;, &quot;Case Type&quot;, multiple = TRUE,
                                                  choices = sort(unique(kidnapping$Case.Type))),
                                      selectInput(&quot;k_case_num_inp&quot;, &quot;Case Number&quot;, multiple = TRUE,
                                                  choices = sort(unique(kidnapping$Case.Number))),
                                      selectInput(&quot;k_status_inp&quot;, &quot;Status&quot;, multiple = TRUE,
                                                  choices = sort(unique(kidnapping$Status))),
                                      selectInput(&quot;k_source_inp&quot;, &quot;Source&quot;, multiple = TRUE,
                                                  choices = sort(unique(kidnapping$Source)))
                             ),
                             tabPanel(&quot;Child&quot;,
                                      selectInput(&quot;k_child_id_inp&quot;, &quot;Child ID&quot;, multiple = TRUE,
                                                  choices = sort(unique(kidnapping$Child.ID.1))),
                                      selectInput(&quot;k_child_race_inp&quot;, &quot;Child Race&quot;, multiple = TRUE,
                                                  choices = sort(unique(kidnapping$Child.Race.1))),
                                      selectInput(&quot;k_child_gender_inp&quot;, &quot;Child Gender&quot;, multiple = TRUE,
                                                  choices = sort(unique(kidnapping$Child.Gender.1))),
                                      selectInput(&quot;k_child_perc_age_inp&quot;, &quot;Child Perceived Age&quot;, multiple = TRUE,
                                                  choices = sort(unique(kidnapping$Child.Perceived.Age.1)))
                             ),
                             tabPanel(&quot;Offender&quot;,
                                      selectInput(&quot;k_off_race_inp&quot;, &quot;Offender Race&quot;, multiple = TRUE,
                                                  choices = sort(unique(kidnapping$Offender.Race.1))),
                                      selectInput(&quot;k_off_gender_inp&quot;, &quot;Offender Gender&quot;, multiple = TRUE,
                                                  choices = sort(unique(kidnapping$Offender.Gender.1))),
                                      selectInput(&quot;k_off_age_inp&quot;, &quot;Offender Age&quot;, multiple = TRUE,
                                                  choices = sort(unique(kidnapping$Offender.Age.1))),
                                      selectInput(&quot;k_off_perc_age_inp&quot;, &quot;Offender Perceived Age&quot;, multiple = TRUE,
                                                  choices = sort(unique(kidnapping$Offender.Perceived.Age.1)))
                             ),
                             tabPanel(&quot;Vehicle&quot;,
                                      selectInput(&quot;k_vehicle_style&quot;, &quot;Vehicle Style&quot;, multiple = TRUE,
                                                  choices = sort(unique(kidnapping$Vehicle.Style.1))),
                                      selectInput(&quot;k_vehicle_color&quot;, &quot;Vehicle Color&quot;, multiple = TRUE,
                                                  choices = sort(unique(kidnapping$Vehicle.Color.1)))
                                      )
                      ),
                      materialSwitch(&quot;kidnapping_switch&quot;, status = &quot;primary&quot;, right = TRUE,
                                     value = TRUE, label = &quot;Include Attempted Kidnapping Data Set&quot;)
             )
      )
    )
  )
)

ui = dashboardPage(
  header,
  dashboardSidebar(disable = TRUE),
  body
)</code></pre>
</div>
<div id="ui.r-file-breakdown" class="section level3">
<h3>ui.R File Breakdown</h3>
<pre class="r"><code>header &lt;- dashboardHeader(
  title = &quot;NCMEC Data Map&quot;
)</code></pre>
<p>Instantiates the dashboard and creates the title.</p>
<pre class="r"><code>body &lt;- dashboardBody(
  fluidRow(tags$head(tags$style(&quot;.rightAlign{float:right;}&quot;)),
    column(width = 8,
           box(width = NULL, title = &quot;Data Map&quot;, status = &quot;warning&quot;, solidHeader = TRUE,
                  leafletOutput(&quot;map&quot;, height = 600),
                  downloadLink(&quot;download_link&quot;, label = &quot;Download Filtered Data&quot;)
           )
    ),</code></pre>
<p>This starts the dashboard body object. It also creates the box that contains the data map in the application.</p>
<pre class="r"><code>column(4,
      tabBox(width = NULL, title = &quot;Filters&quot;,
             tabPanel(&quot;Missing Persons&quot;,
                      tabBox(width = NULL,
                             tabPanel(&quot;Location&quot;,
                                      selectInput(&quot;m_state_inp&quot;, &quot;State&quot;, multiple = TRUE,
                                                  choices = sort(unique(missing$state))),
                                      selectInput(&quot;m_city_inp&quot;, &quot;City&quot;, multiple = TRUE,
                                                  choices = sort(unique(missing$city))),
                                      selectInput(&quot;m_zip_inp&quot;, &quot;Zipcode&quot;, multiple = TRUE,
                                                  choices = sort(unique(missing$zip)))
                                      ),
                             tabPanel(&quot;Child&quot;,
                                      selectInput(&quot;m_case_num_inp&quot;, &quot;Case Number&quot;, multiple = TRUE,
                                                  choices = sort(unique(missing$Case.Number))),
                                      selectInput(&quot;m_child_race_inp&quot;, &quot;Child Race&quot;, multiple = TRUE,
                                                  choices = sort(unique(missing$Race))),
                                      selectInput(&quot;m_child_gender_inp&quot;, &quot;Child Gender&quot;, multiple = TRUE,
                                                  choices = sort(unique(missing$Gender))),
                                      selectInput(&quot;m_child_age_inp&quot;, &quot;Child Age&quot;, multiple = TRUE,
                                                  choices = sort(unique(missing$Age.Missing)))
                                      ),
                             tabPanel(&quot;Vehicle&quot;,
                                      selectInput(&quot;m_veh_style_inp&quot;, &quot;Vehicle Style&quot;, multiple = TRUE,
                                                  choices = sort(unique(missing$Vehicle.Style))),
                                      selectInput(&quot;m_veh_color_inp&quot;, &quot;Vehicle Color&quot;, multiple = TRUE,
                                                  choices = sort(unique(missing$Vehicle.Color)))
                                      )
                             ),
                      materialSwitch(&quot;missing_switch&quot;, status = &quot;primary&quot;, right = TRUE,
                                     value = TRUE, label = &quot;Include Missing Persons Data Set&quot;)
                      ),</code></pre>
<p>This starts the tab box that the filters are seperated in. It also handles the first filter box that contains all of the filtering options for the Missing Persons data set.</p>
<pre class="r"><code>tabPanel(&quot;Attempted Kidnapping&quot;,
                      tabBox(width = NULL,
                             tabPanel(&quot;Location&quot;,
                                      selectInput(&quot;k_state_inp&quot;, &quot;State&quot;, multiple = TRUE,
                                                  choices = sort(unique(kidnapping$state))),
                                      selectInput(&quot;k_city_inp&quot;, &quot;City&quot;, multiple = TRUE,
                                                  choices = sort(unique(kidnapping$city))),
                                      selectInput(&quot;k_zip_inp&quot;, &quot;Zipcode&quot;, multiple = TRUE,
                                                  choices = sort(unique(kidnapping$zip)))
                             ),
                             tabPanel(&quot;Case&quot;,
                                      selectInput(&quot;k_case_type_inp&quot;, &quot;Case Type&quot;, multiple = TRUE,
                                                  choices = sort(unique(kidnapping$Case.Type))),
                                      selectInput(&quot;k_case_num_inp&quot;, &quot;Case Number&quot;, multiple = TRUE,
                                                  choices = sort(unique(kidnapping$Case.Number))),
                                      selectInput(&quot;k_status_inp&quot;, &quot;Status&quot;, multiple = TRUE,
                                                  choices = sort(unique(kidnapping$Status))),
                                      selectInput(&quot;k_source_inp&quot;, &quot;Source&quot;, multiple = TRUE,
                                                  choices = sort(unique(kidnapping$Source)))
                             ),
                             tabPanel(&quot;Child&quot;,
                                      selectInput(&quot;k_child_id_inp&quot;, &quot;Child ID&quot;, multiple = TRUE,
                                                  choices = sort(unique(kidnapping$Child.ID.1))),
                                      selectInput(&quot;k_child_race_inp&quot;, &quot;Child Race&quot;, multiple = TRUE,
                                                  choices = sort(unique(kidnapping$Child.Race.1))),
                                      selectInput(&quot;k_child_gender_inp&quot;, &quot;Child Gender&quot;, multiple = TRUE,
                                                  choices = sort(unique(kidnapping$Child.Gender.1))),
                                      selectInput(&quot;k_child_perc_age_inp&quot;, &quot;Child Perceived Age&quot;, multiple = TRUE,
                                                  choices = sort(unique(kidnapping$Child.Perceived.Age.1)))
                             ),
                             tabPanel(&quot;Offender&quot;,
                                      selectInput(&quot;k_off_race_inp&quot;, &quot;Offender Race&quot;, multiple = TRUE,
                                                  choices = sort(unique(kidnapping$Offender.Race.1))),
                                      selectInput(&quot;k_off_gender_inp&quot;, &quot;Offender Gender&quot;, multiple = TRUE,
                                                  choices = sort(unique(kidnapping$Offender.Gender.1))),
                                      selectInput(&quot;k_off_age_inp&quot;, &quot;Offender Age&quot;, multiple = TRUE,
                                                  choices = sort(unique(kidnapping$Offender.Age.1))),
                                      selectInput(&quot;k_off_perc_age_inp&quot;, &quot;Offender Perceived Age&quot;, multiple = TRUE,
                                                  choices = sort(unique(kidnapping$Offender.Perceived.Age.1)))
                             ),
                             tabPanel(&quot;Vehicle&quot;,
                                      selectInput(&quot;k_vehicle_style&quot;, &quot;Vehicle Style&quot;, multiple = TRUE,
                                                  choices = sort(unique(kidnapping$Vehicle.Style.1))),
                                      selectInput(&quot;k_vehicle_color&quot;, &quot;Vehicle Color&quot;, multiple = TRUE,
                                                  choices = sort(unique(kidnapping$Vehicle.Color.1)))
                                      )
                      ),
                      materialSwitch(&quot;kidnapping_switch&quot;, status = &quot;primary&quot;, right = TRUE,
                                     value = TRUE, label = &quot;Include Attempted Kidnapping Data Set&quot;)
             )</code></pre>
<p>This handles the filter box that contains all of the filtering options for the Attempted Kidnapping data set.</p>
<pre class="r"><code>ui = dashboardPage(
  header,
  dashboardSidebar(disable = TRUE),
  body
)</code></pre>
<p>This code snippet creates the user interface for the application.</p>
</div>
<div id="server.r-file" class="section level3">
<h3>server.R File</h3>
<pre class="r"><code>function(input, output, session) {

  output$download_link &lt;- downloadHandler(
    filename = function(){
      paste0(&quot;NCMEC-data&quot;,&quot;.zip&quot;)
    },
    content = function(file){
      #go to a temp dir to avoid permission issues
      owd &lt;- setwd(tempdir())
      on.exit(setwd(owd))
      write.csv(missing.download, &quot;Missing-Persons.csv&quot;)
      write.csv(kidnapping.download, &quot;Kidnapping-Attempts.csv&quot;)
      files = c(&quot;Missing-Persons.csv&quot;, &quot;Kidnapping-Attempts.csv&quot;)
      #create the zip file
      zip(file,files)
    },
    contentType = &quot;application/zip&quot;
  )

  whichSets = reactive({
    if (input$missing_switch &amp; input$kidnapping_switch) { return (1) }
    if (input$missing_switch &amp; !input$kidnapping_switch) { return (2) }
    if (!input$missing_switch &amp; input$kidnapping_switch) { return (3) }
    if (!input$missing_switch &amp; !input$kidnapping_switch) { return (4) }
  })

  getMissing = reactive({
    filtered = missing

    # check for state
    if (!is.null(input$m_state_inp)) { filtered = filtered[filtered$state %in% input$m_state_inp,] }
    # check for city
    if (!is.null(input$m_city_inp)) { filtered = filtered[filtered$city %in% input$m_city_inp,] }
    # check for zip
    if (!is.null(input$m_zip_inp)) { filtered = filtered[filtered$zip %in% input$m_zip_inp,] }
    # check for case number
    if (!is.null(input$m_case_num_inp)) { filtered = filtered[filtered$Case.Number %in% input$m_case_num_inp,] }
    # check for gender
    if (!is.null(input$m_child_gender_inp)) { filtered = filtered[filtered$Gender %in% input$m_child_gender_inp,] }
    # check for race
    if (!is.null(input$m_child_race_inp)) { filtered = filtered[filtered$Race %in% input$m_child_race_inp,] }
    # check for age
    if (!is.null(input$m_child_age_inp)) { filtered = filtered[filtered$Age.Missing %in% input$m_child_age_inp,] }
    # check for vehicle style
    if (!is.null(input$m_veh_style_inp)) { filtered = filtered[filtered$Vehicle.Style %in% input$m_veh_style_inp,] }
    # check for vehicle color
    if (!is.null(input$m_veh_color_inp)) { filtered = filtered[filtered$Vehicle.Color %in% input$m_veh_color_inp,] }

    missing.download &lt;&lt;- filtered
    return (filtered)
  })

  getKidnapping = reactive({
    filtered = kidnapping

    # check for state
    if (!is.null(input$k_state_inp)) { filtered = filtered[filtered$state %in% input$k_state_inp,] }
    # check for city
    if (!is.null(input$k_city_inp)) { filtered = filtered[filtered$city %in% input$k_city_inp,] }
    # check for zip
    if (!is.null(input$k_zip_inp)) { filtered = filtered[filtered$zip %in% input$k_zip_inp,] }
    # check case type
    if (!is.null(input$k_case_type_inp)) { filtered = filtered[filtered$Case.Type %in% input$k_case_type_inp,] }
    # check case number
    if (!is.null(input$k_case_num_inp)) { filtered = filtered[filtered$Case.Number %in% input$k_case_num_inp,] }
    # check status
    if (!is.null(input$k_status_inp)) { filtered = filtered[filtered$Status %in% input$k_status_inp,] }
    # check source
    if (!is.null(input$k_source_inp)) { filtered = filtered[filtered$Source %in% input$k_source_inp,] }
    # check child id
    if (!is.null(input$k_child_id_inp)) { filtered = filtered[filtered$Child.ID.1 %in% input$k_child_id_inp,] }
    # check child race
    if (!is.null(input$k_child_race_inp)) { filtered = filtered[filtered$Child.Race.1 %in% input$k_child_race_inp,] }
    # check child gender
    if (!is.null(input$k_child_gender_inp)) { filtered = filtered[filtered$Child.Gender.1 %in% input$k_child_gender_inp,] }
    # check child perceived age
    if (!is.null(input$k_child_perc_age_inp)) { filtered = filtered[filtered$Child.Perceived.Age.1 %in% input$k_child_perc_age_inp,] }
    # check offender race
    if (!is.null(input$k_off_race_inp)) { filtered = filtered[filtered$Offender.Race.1 %in% input$k_off_race_inp,] }
    # check offender gender
    if (!is.null(input$k_off_gender_inp)) { filtered = filtered[filtered$Offender.Gender.1 %in% input$k_off_gender_inp,] }
    # check offender age
    if (!is.null(input$k_off_age_inp)) { filtered = filtered[filtered$Offender.Age.1 %in% input$k_off_age_inp,] }
    # check offender perceived age
    if (!is.null(input$k_off_perc_age_inp)) { filtered = filtered[filtered$Offender.Perceived.Age.1 %in% input$k_off_perc_age_inp,] }

    kidnapping.download &lt;&lt;- filtered
    return (filtered)
  })

  output$map = renderLeaflet({

    # read in the missing and kidnapping data
    missing.filtered = getMissing()
    kidnapping.filtered = getKidnapping()

    # read in which datasets to show
    sets = whichSets()

    # create the labels
    missing.popup = paste(sep = &quot;&lt;br/&gt;&quot;,
                          &quot;&lt;center&gt;&lt;b&gt;Location Info&lt;/b&gt;&lt;/center&gt;&quot;,
                          paste0(&quot;State: &quot;, missing.filtered$state),
                          paste0(&quot;City: &quot;, missing.filtered$city),
                          paste0(&quot;Zipcode: &quot;, missing.filtered$zip, &quot;&lt;br/&gt;&quot;),
                          &quot;&lt;center&gt;&lt;b&gt;Child Info&lt;/b&gt;&lt;/center&gt;&quot;,
                          paste0(&quot;Case Number: &quot;, missing.filtered$Case.Number),
                          paste0(&quot;Child Race: &quot;, missing.filtered$Race),
                          paste0(&quot;Child Gender: &quot;, missing.filtered$Gender),
                          paste0(&quot;Child Age: &quot;, missing.filtered$Age.Missing, &quot;&lt;br/&gt;&quot;),
                          &quot;&lt;center&gt;&lt;b&gt;Vehicle Info&lt;/b&gt;&lt;/center&gt;&quot;,
                          paste0(&quot;Vehicle Style: &quot;, missing.filtered$Vehicle.Style),
                          paste0(&quot;Vehicle Color: &quot;, missing.filtered$Vehicle.Color)
                          )
    kidnapping.popup = paste(sep = &quot;&lt;br/&gt;&quot;,
                             &quot;&lt;center&gt;&lt;b&gt;Location Info&lt;/b&gt;&lt;/center&gt;&quot;,
                             paste0(&quot;State: &quot;, kidnapping.filtered$state),
                             paste0(&quot;City: &quot;, kidnapping.filtered$city),
                             paste0(&quot;Zipcode: &quot;, kidnapping.filtered$zip, &quot;&lt;br/&gt;&quot;),
                             &quot;&lt;center&gt;&lt;b&gt;Case Info&lt;/b&gt;&lt;/center&gt;&quot;,
                             paste0(&quot;Case Type: &quot;, kidnapping.filtered$Case.Type),
                             paste0(&quot;Case Number: &quot;, kidnapping.filtered$Case.Number),
                             paste0(&quot;Status: &quot;, kidnapping.filtered$Status),
                             paste0(&quot;Source: &quot;, kidnapping.filtered$Source, &quot;&lt;br/&gt;&quot;),
                             &quot;&lt;center&gt;&lt;b&gt;Child Info&lt;/b&gt;&lt;/center&gt;&quot;,
                             paste0(&quot;Child ID: &quot;, kidnapping.filtered$Child.ID.1),
                             paste0(&quot;Child Race: &quot;, kidnapping.filtered$Child.Race.1),
                             paste0(&quot;Child Gender: &quot;, kidnapping.filtered$Child.Gender.1),
                             paste0(&quot;Child Perceived Age: &quot;, kidnapping.filtered$Child.Perceived.Age.1, &quot;&lt;br/&gt;&quot;),
                             &quot;&lt;center&gt;&lt;b&gt;Offender Info&lt;/b&gt;&lt;/center&gt;&quot;,
                             paste0(&quot;Offender Race: &quot;, kidnapping.filtered$Offender.Race.1),
                             paste0(&quot;Offender Gender: &quot;, kidnapping.filtered$Offender.Gender.1),
                             paste0(&quot;Offender Age: &quot;, kidnapping.filtered$Offender.Age.1),
                             paste0(&quot;Offender Perceived Age: &quot;, kidnapping.filtered$Offender.Perceived.Age.1, &quot;&lt;br/&gt;&quot;),
                             &quot;&lt;center&gt;&lt;b&gt;Vehicle Info&lt;/b&gt;&lt;/center&gt;&quot;,
                             paste0(&quot;Vehicle Style: &quot;, kidnapping.filtered$Vehicle.Style.1),
                             paste0(&quot;Vehicle Color: &quot;, kidnapping.filtered$Vehicle.Color.1)
                             )

    # create the map
    if (sets == 1) {
      leaflet() %&gt;% addProviderTiles(providers$CartoDB.Positron) %&gt;%
        addCircleMarkers(
          data = missing.filtered, lng = ~longitude, lat = ~latitude, color = &quot;#C39BD3&quot;,
          clusterOptions = markerClusterOptions(iconCreateFunction =
                                                  JS(&quot;
                                                     function(cluster) {
                                                     return new L.DivIcon({
                                                     html: &#39;&lt;div style=\&quot;background-color:rgba(195,155,211,0.8)\&quot;&gt;&lt;span&gt;&#39; + cluster.getChildCount() + &#39;&lt;/div&gt;&lt;span&gt;&#39;,
                                                     className: &#39;marker-cluster&#39;
                                                     });
                                                     }&quot;)
          ),
          popup = missing.popup
                                                  ) %&gt;%
        addCircleMarkers(
          data = kidnapping.filtered, lng = ~longitude, lat = ~latitude, color = &quot;#82E0AA&quot;,
          clusterOptions = markerClusterOptions(iconCreateFunction =
                                                  JS(&quot;
                                                     function(cluster) {
                                                     return new L.DivIcon({
                                                     html: &#39;&lt;div style=\&quot;background-color:rgba(130,224,170,0.8)\&quot;&gt;&lt;span&gt;&#39; + cluster.getChildCount() + &#39;&lt;/div&gt;&lt;span&gt;&#39;,
                                                     className: &#39;marker-cluster&#39;
                                                     });
                                                     }&quot;)
          ),
          popup = kidnapping.popup
                                                  ) %&gt;%
        addLegend(
          &quot;bottomleft&quot;, title = &quot;Datasets&quot;, labels = c(&quot;Missing Persons&quot;, &quot;Attempted Kidnapping&quot;),
          colors = c(&quot;#C39BD3&quot;,&quot;#82E0AA&quot;), opacity = 0.5
        )
    } else if (sets == 2) {
      leaflet() %&gt;% addProviderTiles(providers$CartoDB.Positron) %&gt;%
        addCircleMarkers(
          data = missing.filtered, lng = ~longitude, lat = ~latitude, color = &quot;#C39BD3&quot;,
          clusterOptions = markerClusterOptions(iconCreateFunction =
                                                  JS(&quot;
                                                     function(cluster) {
                                                     return new L.DivIcon({
                                                     html: &#39;&lt;div style=\&quot;background-color:rgba(195,155,211,0.8)\&quot;&gt;&lt;span&gt;&#39; + cluster.getChildCount() + &#39;&lt;/div&gt;&lt;span&gt;&#39;,
                                                     className: &#39;marker-cluster&#39;
                                                     });
                                                     }&quot;)
          ),
          popup = missing.popup
                                                  ) %&gt;%
        addLegend(
          &quot;bottomleft&quot;, title = &quot;Datasets&quot;, labels = c(&quot;Missing Persons&quot;, &quot;Attempted Kidnapping&quot;),
          colors = c(&quot;#C39BD3&quot;,&quot;#82E0AA&quot;), opacity = 0.5
        )
    } else if (sets == 3) {
      leaflet() %&gt;% addProviderTiles(providers$CartoDB.Positron) %&gt;%
        addCircleMarkers(
          data = kidnapping.filtered, lng = ~longitude, lat = ~latitude, color = &quot;#82E0AA&quot;,
          clusterOptions = markerClusterOptions(iconCreateFunction =
                                                  JS(&quot;
                                                     function(cluster) {
                                                     return new L.DivIcon({
                                                     html: &#39;&lt;div style=\&quot;background-color:rgba(130,224,170,0.8)\&quot;&gt;&lt;span&gt;&#39; + cluster.getChildCount() + &#39;&lt;/div&gt;&lt;span&gt;&#39;,
                                                     className: &#39;marker-cluster&#39;
                                                     });
                                                     }&quot;)
          ),
          popup = kidnapping.popup
                                                  ) %&gt;%
        addLegend(
          &quot;bottomleft&quot;, title = &quot;Datasets&quot;, labels = c(&quot;Missing Persons&quot;, &quot;Attempted Kidnapping&quot;),
          colors = c(&quot;#C39BD3&quot;,&quot;#82E0AA&quot;), opacity = 0.5
        )
    } else {
      leaflet() %&gt;% addProviderTiles(providers$CartoDB.Positron)
    }
  })
}</code></pre>
</div>
<div id="server.r-file-breakdown" class="section level3">
<h3>server.R File Breakdown</h3>
<pre class="r"><code>  output$download_link &lt;- downloadHandler(
    filename = function(){
      paste0(&quot;NCMEC-data&quot;,&quot;.zip&quot;)
    },
    content = function(file){
      #go to a temp dir to avoid permission issues
      owd &lt;- setwd(tempdir())
      on.exit(setwd(owd))
      write.csv(missing.download, &quot;Missing-Persons.csv&quot;)
      write.csv(kidnapping.download, &quot;Kidnapping-Attempts.csv&quot;)
      files = c(&quot;Missing-Persons.csv&quot;, &quot;Kidnapping-Attempts.csv&quot;)
      #create the zip file
      zip(file,files)
    },
    contentType = &quot;application/zip&quot;
  )</code></pre>
<p>This downloads the properly filtered data when the download link is clicked.</p>
<pre class="r"><code>  whichSets = reactive({
    if (input$missing_switch &amp; input$kidnapping_switch) { return (1) }
    if (input$missing_switch &amp; !input$kidnapping_switch) { return (2) }
    if (!input$missing_switch &amp; input$kidnapping_switch) { return (3) }
    if (!input$missing_switch &amp; !input$kidnapping_switch) { return (4) }
  })</code></pre>
<p>This function determines which data sets to show in the map based off of the data set switches.</p>
<pre class="r"><code>  getMissing = reactive({
    filtered = missing

    # check for state
    if (!is.null(input$m_state_inp)) { filtered = filtered[filtered$state %in% input$m_state_inp,] }
    # check for city
    if (!is.null(input$m_city_inp)) { filtered = filtered[filtered$city %in% input$m_city_inp,] }
    # check for zip
    if (!is.null(input$m_zip_inp)) { filtered = filtered[filtered$zip %in% input$m_zip_inp,] }
    # check for case number
    if (!is.null(input$m_case_num_inp)) { filtered = filtered[filtered$Case.Number %in% input$m_case_num_inp,] }
    # check for gender
    if (!is.null(input$m_child_gender_inp)) { filtered = filtered[filtered$Gender %in% input$m_child_gender_inp,] }
    # check for race
    if (!is.null(input$m_child_race_inp)) { filtered = filtered[filtered$Race %in% input$m_child_race_inp,] }
    # check for age
    if (!is.null(input$m_child_age_inp)) { filtered = filtered[filtered$Age.Missing %in% input$m_child_age_inp,] }
    # check for vehicle style
    if (!is.null(input$m_veh_style_inp)) { filtered = filtered[filtered$Vehicle.Style %in% input$m_veh_style_inp,] }
    # check for vehicle color
    if (!is.null(input$m_veh_color_inp)) { filtered = filtered[filtered$Vehicle.Color %in% input$m_veh_color_inp,] }

    missing.download &lt;&lt;- filtered
    return (filtered)
  })</code></pre>
<p>This gets the filtered data for the Missing Persons data set based on the filtering options.</p>
<pre class="r"><code>  getKidnapping = reactive({
    filtered = kidnapping

    # check for state
    if (!is.null(input$k_state_inp)) { filtered = filtered[filtered$state %in% input$k_state_inp,] }
    # check for city
    if (!is.null(input$k_city_inp)) { filtered = filtered[filtered$city %in% input$k_city_inp,] }
    # check for zip
    if (!is.null(input$k_zip_inp)) { filtered = filtered[filtered$zip %in% input$k_zip_inp,] }
    # check case type
    if (!is.null(input$k_case_type_inp)) { filtered = filtered[filtered$Case.Type %in% input$k_case_type_inp,] }
    # check case number
    if (!is.null(input$k_case_num_inp)) { filtered = filtered[filtered$Case.Number %in% input$k_case_num_inp,] }
    # check status
    if (!is.null(input$k_status_inp)) { filtered = filtered[filtered$Status %in% input$k_status_inp,] }
    # check source
    if (!is.null(input$k_source_inp)) { filtered = filtered[filtered$Source %in% input$k_source_inp,] }
    # check child id
    if (!is.null(input$k_child_id_inp)) { filtered = filtered[filtered$Child.ID.1 %in% input$k_child_id_inp,] }
    # check child race
    if (!is.null(input$k_child_race_inp)) { filtered = filtered[filtered$Child.Race.1 %in% input$k_child_race_inp,] }
    # check child gender
    if (!is.null(input$k_child_gender_inp)) { filtered = filtered[filtered$Child.Gender.1 %in% input$k_child_gender_inp,] }
    # check child perceived age
    if (!is.null(input$k_child_perc_age_inp)) { filtered = filtered[filtered$Child.Perceived.Age.1 %in% input$k_child_perc_age_inp,] }
    # check offender race
    if (!is.null(input$k_off_race_inp)) { filtered = filtered[filtered$Offender.Race.1 %in% input$k_off_race_inp,] }
    # check offender gender
    if (!is.null(input$k_off_gender_inp)) { filtered = filtered[filtered$Offender.Gender.1 %in% input$k_off_gender_inp,] }
    # check offender age
    if (!is.null(input$k_off_age_inp)) { filtered = filtered[filtered$Offender.Age.1 %in% input$k_off_age_inp,] }
    # check offender perceived age
    if (!is.null(input$k_off_perc_age_inp)) { filtered = filtered[filtered$Offender.Perceived.Age.1 %in% input$k_off_perc_age_inp,] }

    kidnapping.download &lt;&lt;- filtered
    return (filtered)
  })</code></pre>
<p>This gets the filtered data for the Attempted Kidnapping data set based on the filtering options.</p>
<pre class="r"><code>output$map = renderLeaflet({

    # read in the missing and kidnapping data
    missing.filtered = getMissing()
    kidnapping.filtered = getKidnapping()

    # read in which datasets to show
    sets = whichSets()

    # create the labels
    missing.popup = paste(sep = &quot;&lt;br/&gt;&quot;,
                          &quot;&lt;center&gt;&lt;b&gt;Location Info&lt;/b&gt;&lt;/center&gt;&quot;,
                          paste0(&quot;State: &quot;, missing.filtered$state),
                          paste0(&quot;City: &quot;, missing.filtered$city),
                          paste0(&quot;Zipcode: &quot;, missing.filtered$zip, &quot;&lt;br/&gt;&quot;),
                          &quot;&lt;center&gt;&lt;b&gt;Child Info&lt;/b&gt;&lt;/center&gt;&quot;,
                          paste0(&quot;Case Number: &quot;, missing.filtered$Case.Number),
                          paste0(&quot;Child Race: &quot;, missing.filtered$Race),
                          paste0(&quot;Child Gender: &quot;, missing.filtered$Gender),
                          paste0(&quot;Child Age: &quot;, missing.filtered$Age.Missing, &quot;&lt;br/&gt;&quot;),
                          &quot;&lt;center&gt;&lt;b&gt;Vehicle Info&lt;/b&gt;&lt;/center&gt;&quot;,
                          paste0(&quot;Vehicle Style: &quot;, missing.filtered$Vehicle.Style),
                          paste0(&quot;Vehicle Color: &quot;, missing.filtered$Vehicle.Color)
                          )
    kidnapping.popup = paste(sep = &quot;&lt;br/&gt;&quot;,
                             &quot;&lt;center&gt;&lt;b&gt;Location Info&lt;/b&gt;&lt;/center&gt;&quot;,
                             paste0(&quot;State: &quot;, kidnapping.filtered$state),
                             paste0(&quot;City: &quot;, kidnapping.filtered$city),
                             paste0(&quot;Zipcode: &quot;, kidnapping.filtered$zip, &quot;&lt;br/&gt;&quot;),
                             &quot;&lt;center&gt;&lt;b&gt;Case Info&lt;/b&gt;&lt;/center&gt;&quot;,
                             paste0(&quot;Case Type: &quot;, kidnapping.filtered$Case.Type),
                             paste0(&quot;Case Number: &quot;, kidnapping.filtered$Case.Number),
                             paste0(&quot;Status: &quot;, kidnapping.filtered$Status),
                             paste0(&quot;Source: &quot;, kidnapping.filtered$Source, &quot;&lt;br/&gt;&quot;),
                             &quot;&lt;center&gt;&lt;b&gt;Child Info&lt;/b&gt;&lt;/center&gt;&quot;,
                             paste0(&quot;Child ID: &quot;, kidnapping.filtered$Child.ID.1),
                             paste0(&quot;Child Race: &quot;, kidnapping.filtered$Child.Race.1),
                             paste0(&quot;Child Gender: &quot;, kidnapping.filtered$Child.Gender.1),
                             paste0(&quot;Child Perceived Age: &quot;, kidnapping.filtered$Child.Perceived.Age.1, &quot;&lt;br/&gt;&quot;),
                             &quot;&lt;center&gt;&lt;b&gt;Offender Info&lt;/b&gt;&lt;/center&gt;&quot;,
                             paste0(&quot;Offender Race: &quot;, kidnapping.filtered$Offender.Race.1),
                             paste0(&quot;Offender Gender: &quot;, kidnapping.filtered$Offender.Gender.1),
                             paste0(&quot;Offender Age: &quot;, kidnapping.filtered$Offender.Age.1),
                             paste0(&quot;Offender Perceived Age: &quot;, kidnapping.filtered$Offender.Perceived.Age.1, &quot;&lt;br/&gt;&quot;),
                             &quot;&lt;center&gt;&lt;b&gt;Vehicle Info&lt;/b&gt;&lt;/center&gt;&quot;,
                             paste0(&quot;Vehicle Style: &quot;, kidnapping.filtered$Vehicle.Style.1),
                             paste0(&quot;Vehicle Color: &quot;, kidnapping.filtered$Vehicle.Color.1)
                             )

    # create the map
    if (sets == 1) {
      leaflet() %&gt;% addProviderTiles(providers$CartoDB.Positron) %&gt;%
        addCircleMarkers(
          data = missing.filtered, lng = ~longitude, lat = ~latitude, color = &quot;#C39BD3&quot;,
          clusterOptions = markerClusterOptions(iconCreateFunction =
                                                  JS(&quot;
                                                     function(cluster) {
                                                     return new L.DivIcon({
                                                     html: &#39;&lt;div style=\&quot;background-color:rgba(195,155,211,0.8)\&quot;&gt;&lt;span&gt;&#39; + cluster.getChildCount() + &#39;&lt;/div&gt;&lt;span&gt;&#39;,
                                                     className: &#39;marker-cluster&#39;
                                                     });
                                                     }&quot;)
          ),
          popup = missing.popup
                                                  ) %&gt;%
        addCircleMarkers(
          data = kidnapping.filtered, lng = ~longitude, lat = ~latitude, color = &quot;#82E0AA&quot;,
          clusterOptions = markerClusterOptions(iconCreateFunction =
                                                  JS(&quot;
                                                     function(cluster) {
                                                     return new L.DivIcon({
                                                     html: &#39;&lt;div style=\&quot;background-color:rgba(130,224,170,0.8)\&quot;&gt;&lt;span&gt;&#39; + cluster.getChildCount() + &#39;&lt;/div&gt;&lt;span&gt;&#39;,
                                                     className: &#39;marker-cluster&#39;
                                                     });
                                                     }&quot;)
          ),
          popup = kidnapping.popup
                                                  ) %&gt;%
        addLegend(
          &quot;bottomleft&quot;, title = &quot;Datasets&quot;, labels = c(&quot;Missing Persons&quot;, &quot;Attempted Kidnapping&quot;),
          colors = c(&quot;#C39BD3&quot;,&quot;#82E0AA&quot;), opacity = 0.5
        )
    } else if (sets == 2) {
      leaflet() %&gt;% addProviderTiles(providers$CartoDB.Positron) %&gt;%
        addCircleMarkers(
          data = missing.filtered, lng = ~longitude, lat = ~latitude, color = &quot;#C39BD3&quot;,
          clusterOptions = markerClusterOptions(iconCreateFunction =
                                                  JS(&quot;
                                                     function(cluster) {
                                                     return new L.DivIcon({
                                                     html: &#39;&lt;div style=\&quot;background-color:rgba(195,155,211,0.8)\&quot;&gt;&lt;span&gt;&#39; + cluster.getChildCount() + &#39;&lt;/div&gt;&lt;span&gt;&#39;,
                                                     className: &#39;marker-cluster&#39;
                                                     });
                                                     }&quot;)
          ),
          popup = missing.popup
                                                  ) %&gt;%
        addLegend(
          &quot;bottomleft&quot;, title = &quot;Datasets&quot;, labels = c(&quot;Missing Persons&quot;, &quot;Attempted Kidnapping&quot;),
          colors = c(&quot;#C39BD3&quot;,&quot;#82E0AA&quot;), opacity = 0.5
        )
    } else if (sets == 3) {
      leaflet() %&gt;% addProviderTiles(providers$CartoDB.Positron) %&gt;%
        addCircleMarkers(
          data = kidnapping.filtered, lng = ~longitude, lat = ~latitude, color = &quot;#82E0AA&quot;,
          clusterOptions = markerClusterOptions(iconCreateFunction =
                                                  JS(&quot;
                                                     function(cluster) {
                                                     return new L.DivIcon({
                                                     html: &#39;&lt;div style=\&quot;background-color:rgba(130,224,170,0.8)\&quot;&gt;&lt;span&gt;&#39; + cluster.getChildCount() + &#39;&lt;/div&gt;&lt;span&gt;&#39;,
                                                     className: &#39;marker-cluster&#39;
                                                     });
                                                     }&quot;)
          ),
          popup = kidnapping.popup
                                                  ) %&gt;%
        addLegend(
          &quot;bottomleft&quot;, title = &quot;Datasets&quot;, labels = c(&quot;Missing Persons&quot;, &quot;Attempted Kidnapping&quot;),
          colors = c(&quot;#C39BD3&quot;,&quot;#82E0AA&quot;), opacity = 0.5
        )
    } else {
      leaflet() %&gt;% addProviderTiles(providers$CartoDB.Positron)
    }
  })</code></pre>
<p>This handles the output for the map itself. It gets the data sets, creates the popups for the nodes, and creates the map based on which data sets should be visible.</p>
<hr />
</div>
</div>
<div id="implementation-plan" class="section level1">
<h1>Implementation Plan</h1>
<p>This application will be built in the R programming language, using the R Shiny application infrastructure. The software will be deployed from the RStudio IDE directly onto shinyapps.io, a hosting service for R applications. The application is currently being hosted using the free tier of the hosting service.</p>
<p>The free hosting service is not very powerful and can only handle up to 25 hours of use per month. It is mainly used for application demos, but if this app ever makes it to production, the tier of hosting just needs to be updated. Choosing a tier depends on how many users the application will have, but a good place to start would be the basic plan. This plan costs $39.00 per month and includes:</p>
<ol style="list-style-type: decimal">
<li>Unlimited applications</li>
<li>500 active hours (per month)</li>
<li>Performance Boost (resources are bumped when the app is stressed)</li>
<li>Premium Support (technical support from shinyapps.io)</li>
</ol>
<p>R - <a href="https://www.r-project.org/" class="uri">https://www.r-project.org/</a></p>
<p>R Shiny - <a href="https://shiny.rstudio.com/" class="uri">https://shiny.rstudio.com/</a></p>
<p>RStudio - <a href="https://www.rstudio.com/" class="uri">https://www.rstudio.com/</a></p>
<p>shinyapps.io - <a href="http://www.shinyapps.io/" class="uri">http://www.shinyapps.io/</a></p>
<hr />
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
